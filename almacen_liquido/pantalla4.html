<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pantalla 4 â€“ Firma Quien Entrega</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet"/>
  <style>
    body {font-family:'Poppins',sans-serif;background:linear-gradient(to right,#00416A,#E4E5E6);margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center}
    .contenedor{background:#fff;padding:20px;border-radius:12px;box-shadow:0 3px 10px rgba(0,0,0,.3);max-width:600px;width:90%;text-align:center}
    canvas{border:1px solid #ccc;border-radius:8px;width:100%;height:250px}
    button{margin:10px;padding:10px 16px;border:none;border-radius:6px;background:#0c6cbd;color:#fff;cursor:pointer;font-size:16px}
    button:hover{background:#083d73}
  </style>
</head>
<body>
  <div class="contenedor">
    <h2>Firma â€“ Quien Entrega</h2>
    <canvas id="canvasFirma"></canvas>
    <br>
    <button onclick="limpiarFirma()">ðŸ§¹ Limpiar</button>
    <button onclick="guardarFirma()">âœ… Continuar</button>
  </div>

  <script>
    const canvas = document.getElementById("canvasFirma");
    const ctx = canvas.getContext("2d");
    let dibujando = false;

    canvas.addEventListener("mousedown", () => dibujando = true);
    canvas.addEventListener("mouseup", () => dibujando = false);
    canvas.addEventListener("mousemove", dibujar);

    canvas.addEventListener("touchstart", e => {dibujando = true;});
    canvas.addEventListener("touchend", e => {dibujando = false;});
    canvas.addEventListener("touchmove", dibujarTouch);

    function dibujar(e){
      if(!dibujando) return;
      ctx.fillStyle = "black";
      ctx.beginPath();
      ctx.arc(e.offsetX, e.offsetY, 2, 0, Math.PI*2);
      ctx.fill();
    }

    function dibujarTouch(e){
      if(!dibujando) return;
      let rect = canvas.getBoundingClientRect();
      let touch = e.touches[0];
      let x = touch.clientX - rect.left;
      let y = touch.clientY - rect.top;
      ctx.fillStyle = "black";
      ctx.beginPath();
      ctx.arc(x, y, 2, 0, Math.PI*2);
      ctx.fill();
    }

    function limpiarFirma(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
    }

    function guardarFirma(){
      const dataURL = canvas.toDataURL();
      localStorage.setItem("firmaEntregaLiquidos", dataURL);
      window.location.href="pantalla5.html";
    }
  </script>
</body>
</html>
